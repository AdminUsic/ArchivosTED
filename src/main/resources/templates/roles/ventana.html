
    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1 class="m-0">MODULO ROLES</h1>
          </div><!-- /.col -->
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">Dashboard v1</li>
            </ol>
          </div><!-- /.col -->
        </div><!-- /.row -->
      </div><!-- /.container-fluid -->
    </div>

    <div class="modal fade" id="formularioRegistroModal" aria-labelledby="formularioRegistroModal" tabindex="-1" aria-hidden="true"
      data-mdb-backdrop="static">
      <div class="modal-dialog modal-xl">
        <div class="modal-content" id="FormularioRol" style="overflow-y: auto;">
        </div>
      </div>
    </div>
    <div id="TablaRol"></div>

    <script th:inline="javascript">
      // Carga inicial del div
      cargarTabla();
      //cargarFormulario();

      function cargarTabla() {
        $.ajax({
          type: 'POST',
          url: "/RegistrosRoles",  // Ruta del metodo del controlador en Spring Boot
          success: function (response) {
            $("#TablaRol").html(response);  // Actualiza el contenido del div con la respuesta del servidor
          }
        });
      }

      function cargarFormulario() {
        $.ajax({
          type: 'POST',
          url: "/NuevoRegistroRol",  // Ruta del metodo del controlador en Spring Boot
          success: function (response) {
            $("#FormularioRol").html(response);  // Actualiza el contenido del div con la respuesta del servidor
          }
        });
      }

      // function cancelarMod() {
      //   $.ajax({
      //     type: 'POST',
      //     url: "/NuevoRegistroRol",  // Ruta del metodo del controlador en Spring Boot
      //     success: function (response) {

      //       $("#FormularioRol").html(response);  // Actualiza el contenido del div con la respuesta del servidor
      //       var Toast = Swal.mixin({
      //         toast: true,
      //         position: 'top-end',
      //         showConfirmButton: false,
      //         timer: 3000
      //       });
      //       toastr.info('Modificacion Cancelada');
      //     }
      //   });
      // }

      function Cancelar() {
        $.ajax({
          url: "/ROL",
          type: "GET",
          success: function (data) {
            var Toast = Swal.mixin({
              toast: true,
              position: 'top-end',
              showConfirmButton: false,
              timer: 3000
            });
            toastr.info('Accion Cancelada');
            $("#contenidoRol").html(data); // Actualizar el contenido de la ventana

          }
        });

      }

    </script>
    <script>

      function EliminarRegistro(id, fila) {


        Swal.fire({
          title: '!Atención¡',
          text: '¿Estas Seguro que desea eliminar este rol, al eliminar este rol, afectaria a los usuarios que llevan este rol',
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          confirmButtonText: 'Si, eliminar!'
        }).then((result) => {
          if (result.isConfirmed) {
            eliminarRegistroSeleccionado(id, fila);
          }
        });

        /*Swal.fire({
          title: '¿Eliminar Registro?',
          type: 'error',
          showConfirmButton: false,
          showCancelButton: true,
          cancelButtonText: "Cancelar",
          showDenyButton: true,
          denyButtonText: "Eliminar" // Cambia el texto del botón DenyButton
        }).then((result) => {
          if (result.isDenied) {
            
          }
        });*/
      }

      /* // Función para eliminar una fila del DataTable
       function eliminarRegistro2(element) {
         var tabla = $('#dataTable').DataTable();
         var $tr = $(element).closest('tr');
 
         // Agrega la clase para desactivar el desplazamiento horizontal
         $('#dataTable_wrapper').addClass('no-scroll-x');
 
         // Agrega la clase para la animación
         $tr.addClass('delete-animation');
 
         // Espera 1 segundo antes de eliminar la fila
         setTimeout(function () {
           tabla.row($tr).remove().draw();
 
           // Elimina la clase para reactivar el desplazamiento horizontal
           $('#dataTable_wrapper').removeClass('no-scroll-x');
         }, 1000); // 1000 milisegundos = 1 segundo
       }*/

      function eliminarRegistroSeleccionado(id, fila) {

        $.ajax({
          type: 'POST',
          url: "/EliminarRegistroRol/" + id,  // Ruta del metodo del controlador en Spring Boot
          success: function (response) {
            //cargarTabla();
            Swal.close();
            var tabla = $('#dataTable').DataTable();
            var $tr = $(fila).closest('tr');

            // Agrega la clase para desactivar el desplazamiento horizontal
            $('#dataTable_wrapper').addClass('no-scroll-x');

            // Agrega la clase para la animación
            $tr.addClass('delete-animation');

            // Espera 1 segundo antes de eliminar la fila
            setTimeout(function () {
              tabla.row($tr).remove().draw();

              // Elimina la clase para reactivar el desplazamiento horizontal
              $('#dataTable_wrapper').removeClass('no-scroll-x');
              ReemnumeracionFilas();
            }, 1000); // 1000 milisegundos = 1 segundo
            Swal.fire(
              'Eliminado!',
              'Este registro se ha eliminado con éxito.',
              'success'
            );
          }, error: function (xhr, status, error) {
            // Maneja los errores de la solicitud AJAX
            console.log(error);
          }
        });
      }

      function cargarModFormulario(id, fila) {
        //alert("AAAAAAAAAAAAAAAAAAA");
        $.ajax({
          url: '/ModRol/' + id, // Reemplaza '/ruta_del_servidor' por la URL de tu servidor
          method: 'GET', // Utiliza el método HTTP que corresponda (GET, POST, etc.)
          // Envía el parámetro "id" al servidor
          success: function (response) {

            $("#FormularioRol").html(response);  // Actualiza el contenido del div con la respuesta del servidor
            var div = document.getElementById("FormularioRol");
            var tabla = $('#dataTable').DataTable();
            var tr = $(fila).closest('tr');
            //var $tr = $(fila).closest('tr');
            var numeroFila = tabla.row(tr).index();
            //alert('cargar mod : '+numeroFila)
            //$('#numeroFila').html('<input type="text" value="'+numeroFila+'" id="fila">');
            $('#numeroFila').val(numeroFila);
            div.scrollIntoView({ behavior: 'smooth' });

            toastr.info('¿Modificar Registro?');
          },
          error: function (xhr, status, error) {
            // Maneja los errores de la solicitud AJAX
            console.log(error);
          }
        });
      }
    </script>
    <script>
      function actualizarNumeracion() {
        var tabla = $('#dataTable').DataTable();
        tabla.column(0, { search: 'applied' }).nodes().each(function (cell, i) {
          cell.innerHTML = i + 1;
        });
      }
    </script>